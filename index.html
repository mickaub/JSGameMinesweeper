<!DOCTYPE html>
<html lang="en">
<head>
<title>Minesweeper Game</title>
<meta charset="UFT-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
</head>
<style>
    .tileDiv{
        width: 400px;
        display: flex;
        flex-wrap: wrap;
    }
    .tile{
        height: 38px;
        width: 38px;
        border: solid 1px darkblue;
        background-color: grey;
    }
</style>
<body>
<h2><b>Minesweeper</b></h2>
<div id="grid" class="tileDiv"></div>
<button id="start" onclick="start()">Start</button>
<br>
<button id="lessM" onclick="changeM(-1)">Less Mines</button>
<button id="moreM" onclick="changeM(1)">More Mines</button>
<br>
<div id="mine#">10</div>
<div id="defeated"></div>
</body>
<script>
let size = 100;
let playTiles = document.getElementById("grid");
let MinePlaces = [];
let MineNumber = 10;
let Remaining = [];
for (let i=0;i<size;i++){
    let tile = document.createElement('div');
    tile.classList.add('tile');
    tile.id = i;
    tile.addEventListener("click", changeColour);
    playTiles.append(tile);

    MinePlaces.push(i);
    Remaining.push(i);
}
function changeColour(){
    if(defeated==false&&startV==true){
    let a = this.id;
    document.getElementById(`${a}`).style.backgroundColor = "aqua";
    console.log(this.id);           
    for(let i=0;i<Remaining.length;i++){
        if(a==Remaining[i]){
            Remaining.splice(i,1);
        }
    }
    console.log(Remaining.length);
    }
}
var shuffle = function (array) {

var currentIndex = array.length;
var temporaryValue, randomIndex;

while (0 !== currentIndex) {    
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;   
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
}
};

shuffle(MinePlaces);

let MineFinal = [];
let startV = false;
function start(){
    if(startV==false){
        for(let i=0; i<MineNumber; i++){
        let a = MinePlaces[i];
        
        document.getElementById(`${a}`).style.backgroundColor = "orange";        
        document.getElementById(`${a}`).addEventListener("click", defeat);
        document.getElementById(`${a}`).innerHTML = "";       
              
        if(Remaining.indexOf(a)>-1){
            let index = Remaining.indexOf(a);
            Remaining.splice(index,1);
            MineFinal.push(index);
        }        
        }   

        for(let i=0;i<MineNumber;i++){
        let b = MineFinal[i];
            //filter div to remove numbering mines
        if(b>0&&b<99){
        let r = b + 1;
        let l = b - 1;
        if(MineFinal.indexOf(r)==-1){
            document.getElementById(`${r}`).innerHTML = "1";
        }
        if(MineFinal.indexOf(l)==-1){
        document.getElementById(`${l}`).innerHTML = "1";
        }
        }
        if(b>9){
            let u = b-10;
            if(MineFinal.indexOf(u)==-1){
            document.getElementById(`${u}`).innerHTML = "1";
            }            
        }
        if(b<90){
            let d = b+10;
            if(MineFinal.indexOf(d)==-1){
            document.getElementById(`${d}`).innerHTML = "1";
            }
        }
            
    }
        
    }    
    startV=true;
    console.log(MineFinal)
    console.log(startV);
}
function changeM(diff){
    if(startV==false){
        MineNumber += diff;
        console.log(MineNumber);
    }
    document.getElementById("mine#").innerHTML = MineNumber;
}
let defeated = false;
function defeat (){
    for(let i=0; i<MineNumber; i++){
        let a = MinePlaces[i];
        document.getElementById(`${a}`).style.backgroundColor = "black";
    }
    document.getElementById("defeated").innerHTML = "DEFEATED";
    defeated = true;
}
</script>
</html>